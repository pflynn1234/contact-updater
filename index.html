<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, orientation=portrait">
    <title>Contact Updater - LinkedIn Swipe App</title>
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>📱</text></svg>">
    <style>
        body {
            margin: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        * {
            box-sizing: border-box;
        }
        
        #root {
            min-height: 100vh;
        }
        
        /* Force portrait orientation on mobile */
        @media screen and (orientation: landscape) and (max-height: 500px) {
            body::before {
                content: "Please rotate your device to portrait mode for the best experience";
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                bottom: 0;
                background: rgba(0,0,0,0.9);
                color: white;
                display: flex;
                align-items: center;
                justify-content: center;
                z-index: 9999;
                text-align: center;
                padding: 20px;
                font-size: 18px;
            }
        }
        
        input, textarea, select {
            font-size: 16px;
        }
        
        button {
            min-height: 44px;
            min-width: 44px;
        }

        .lucide {
            width: 1em;
            height: 1em;
            stroke: currentColor;
            stroke-width: 2;
            fill: none;
            stroke-linecap: round;
            stroke-linejoin: round;
        }

        .swipe-locked {
            height: 100vh;
            overflow: hidden;
            position: fixed;
            inset: 0;
            touch-action: none;
        }

        .company-logo {
            object-fit: contain;
            background: white;
            border: 2px solid #e5e7eb;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useRef, useCallback, useMemo } = React;

        // Simple icons
        const ChevronUp = ({ size = 20, className = "" }) => 
            React.createElement('svg', { 
                className: `lucide ${className}`, 
                width: size, 
                height: size, 
                viewBox: "0 0 24 24"
            }, React.createElement('path', { d: "m18 15-6-6-6 6" }));

        const ChevronDown = ({ size = 20, className = "" }) => 
            React.createElement('svg', { 
                className: `lucide ${className}`, 
                width: size, 
                height: size, 
                viewBox: "0 0 24 24"
            }, React.createElement('path', { d: "m6 9 6 6 6-6" }));

        const ChevronLeft = ({ size = 20, className = "" }) => 
            React.createElement('svg', { 
                className: `lucide ${className}`, 
                width: size, 
                height: size, 
                viewBox: "0 0 24 24"
            }, React.createElement('path', { d: "m15 18-6-6 6-6" }));

        const ChevronRight = ({ size = 20, className = "" }) => 
            React.createElement('svg', { 
                className: `lucide ${className}`, 
                width: size, 
                height: size, 
                viewBox: "0 0 24 24"
            }, React.createElement('path', { d: "m9 18 6-6-6-6" }));

        const Upload = ({ size = 20, className = "" }) => 
            React.createElement('svg', { 
                className: `lucide ${className}`, 
                width: size, 
                height: size, 
                viewBox: "0 0 24 24"
            }, [
                React.createElement('path', { key: 1, d: "M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4" }),
                React.createElement('polyline', { key: 2, points: "17,8 12,3 7,8" }),
                React.createElement('line', { key: 3, x1: "12", x2: "12", y1: "3", y2: "15" })
            ]);

        const Settings = ({ size = 20, className = "" }) => 
            React.createElement('svg', { 
                className: `lucide ${className}`, 
                width: size, 
                height: size, 
                viewBox: "0 0 24 24"
            }, [
                React.createElement('path', { key: 1, d: "M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z" }),
                React.createElement('circle', { key: 2, cx: "12", cy: "12", r: "3" })
            ]);

        const Play = ({ size = 20, className = "" }) => 
            React.createElement('svg', { 
                className: `lucide ${className}`, 
                width: size, 
                height: size, 
                viewBox: "0 0 24 24"
            }, React.createElement('polygon', { points: "6,3 20,12 6,21" }));

        // Constants
        const SWIPE_THRESHOLD = 100;
        const DRAG_THRESHOLD = 50;
        const BUTTON_HIGHLIGHT_DURATION = 300;

        const SWIPE_ACTIONS = Object.freeze({
          UP: 'up',
          DOWN: 'down',
          LEFT: 'left',
          RIGHT: 'right'
        });

        const SWIPE_CONFIG = Object.freeze({
          [SWIPE_ACTIONS.UP]: { label: 'SUPER WARM', color: 'yellow', icon: ChevronUp, bgClass: 'bg-yellow-400' },
          [SWIPE_ACTIONS.DOWN]: { label: 'UNKNOWN', color: 'blue', icon: ChevronDown, bgClass: 'bg-blue-400' },
          [SWIPE_ACTIONS.LEFT]: { label: "DON'T INCLUDE", color: 'red', icon: ChevronLeft, bgClass: 'bg-red-400' },
          [SWIPE_ACTIONS.RIGHT]: { label: 'INCLUDE', color: 'green', icon: ChevronRight, bgClass: 'bg-green-400' }
        });

        const SAMPLE_PROFILES = Object.freeze([
          { id: 1, name: "Sarah Johnson", emoji: "🍎", color: "bg-red-100", linkedinUrl: "https://www.linkedin.com/in/sarah-johnson", title: "Senior Product Manager", company: "Microsoft" },
          { id: 2, name: "Michael Chen", emoji: "🥕", color: "bg-orange-100", linkedinUrl: "https://www.linkedin.com/in/michael-chen", title: "Software Engineer", company: "Google" },
          { id: 3, name: "Emily Rodriguez", emoji: "🍌", color: "bg-yellow-100", linkedinUrl: "https://www.linkedin.com/in/emily-rodriguez", title: "Marketing Director", company: "Apple" },
          { id: 4, name: "David Park", emoji: "🥒", color: "bg-green-100", linkedinUrl: "https://www.linkedin.com/in/david-park", title: "Data Scientist", company: "Amazon" }
        ]);

        // Utilities
        const getCompanyLogoUrl = (companyName) => {
          if (!companyName) return null;
          const cleanName = companyName.toLowerCase().replace(/[^a-z0-9]/g, '').replace(/inc|corp|corporation|ltd|llc|company|co/g, '');
          return `https://logo.clearbit.com/${cleanName}.com`;
        };

        const findColumnIndex = (headers, fields) => {
          for (const field of fields) {
            const index = headers.findIndex(h => h.includes(field));
            if (index !== -1) return index;
          }
          return -1;
        };

        const parseCsvData = (csvText) => {
          const lines = csvText.trim().split('\n');
          if (lines.length < 2) return [];
          
          const headers = lines[0].split(/[,\t]/).map(h => h.trim().toLowerCase().replace(/['"]/g, ''));
          
          const nameCol = findColumnIndex(headers, ['name', 'full name', 'fullname']);
          const firstNameCol = findColumnIndex(headers, ['first name', 'firstname']);
          const lastNameCol = findColumnIndex(headers, ['last name', 'lastname']);
          const linkedinCol = findColumnIndex(headers, ['linkedin', 'linkedin url', 'linkedin profile', 'profile url', 'url']);
          const titleCol = findColumnIndex(headers, ['title', 'job title', 'position', 'role']);
          const companyCol = findColumnIndex(headers, ['company', 'organization', 'employer']);
          
          return lines.slice(1).reduce((profiles, line, index) => {
            const row = line.split(/[,\t]/).map(cell => cell.trim().replace(/['"]/g, ''));
            
            let name = '';
            if (nameCol !== -1) {
              name = row[nameCol] || '';
            } else if (firstNameCol !== -1 && lastNameCol !== -1) {
              name = `${row[firstNameCol] || ''} ${row[lastNameCol] || ''}`.trim();
            } else if (firstNameCol !== -1) {
              name = row[firstNameCol] || '';
            }
            
            if (!name) return profiles;
            
            let linkedinUrl = linkedinCol !== -1 ? row[linkedinCol] : '';
            if (linkedinUrl && !linkedinUrl.startsWith('http')) {
              linkedinUrl = `https://${linkedinUrl}`;
            }
            
            const title = titleCol !== -1 ? row[titleCol] : '';
            const company = companyCol !== -1 ? row[companyCol] : '';
            
            profiles.push({
              id: index + 1,
              name,
              linkedinUrl,
              title,
              company,
              emoji: ['🍎', '🥕', '🍌', '🥒', '🍇', '🍓'][index % 6],
              color: ['bg-red-100', 'bg-orange-100', 'bg-yellow-100', 'bg-green-100', 'bg-blue-100', 'bg-purple-100'][index % 6]
            });
            
            return profiles;
          }, []);
        };

        const determineSwipeDirection = (deltaX, deltaY) => {
          const isHorizontal = Math.abs(deltaX) > Math.abs(deltaY);
          
          if (isHorizontal) {
            return deltaX > DRAG_THRESHOLD ? SWIPE_ACTIONS.RIGHT : 
                   deltaX < -DRAG_THRESHOLD ? SWIPE_ACTIONS.LEFT : null;
          }
          
          return deltaY > DRAG_THRESHOLD ? SWIPE_ACTIONS.DOWN : 
                 deltaY < -DRAG_THRESHOLD ? SWIPE_ACTIONS.UP : null;
        };

        const createDecision = (profile, direction) => ({
          profileId: profile.id,
          name: profile.name,
          direction,
          timestamp: new Date().toISOString()
        });

        // Hook
        const useSwipeGesture = (onSwipe) => {
          const startPos = useRef({ x: 0, y: 0 });
          
          const handleTouchStart = useCallback((e) => {
            e.preventDefault();
            e.stopPropagation();
            const touch = e.touches[0];
            startPos.current = { x: touch.clientX, y: touch.clientY };
          }, []);

          const handleTouchEnd = useCallback((e) => {
            e.preventDefault();
            e.stopPropagation();
            
            const touch = e.changedTouches[0];
            const deltaX = touch.clientX - startPos.current.x;
            const deltaY = touch.clientY - startPos.current.y;
            
            if (Math.abs(deltaX) > SWIPE_THRESHOLD || Math.abs(deltaY) > SWIPE_THRESHOLD) {
              const direction = determineSwipeDirection(deltaX, deltaY);
              if (direction) onSwipe(direction);
            }
          }, [onSwipe]);

          return { handleTouchStart, handleTouchEnd };
        };

        // Components
        const SwipeButton = React.memo(({ direction, config, isTriggered, onClick }) => {
          const swipeConfig = SWIPE_CONFIG[direction];
          const userConfig = config[direction] || swipeConfig;
          const Icon = swipeConfig.icon;
          
          const isVertical = direction === SWIPE_ACTIONS.UP || direction === SWIPE_ACTIONS.DOWN;
          
          const positionClasses = {
            [SWIPE_ACTIONS.UP]: 'absolute -top-1 left-1/2 transform -translate-x-1/2',
            [SWIPE_ACTIONS.DOWN]: 'absolute -bottom-1 left-1/2 transform -translate-x-1/2',
            [SWIPE_ACTIONS.LEFT]: 'absolute left-1 top-1/2 transform -translate-y-1/2',
            [SWIPE_ACTIONS.RIGHT]: 'absolute right-1 top-1/2 transform -translate-y-1/2'
          }[direction];

          const handleClick = useCallback((e) => {
            e.preventDefault();
            e.stopPropagation();
            onClick(direction);
          }, [direction, onClick]);

          return React.createElement('button', {
            onClick: handleClick,
            className: `${positionClasses} transition-all duration-200 focus:outline-none z-20 cursor-pointer ${
              isTriggered 
                ? `scale-125 opacity-100 bg-${swipeConfig.color}-500 text-white shadow-lg` 
                : `opacity-70 hover:scale-105 hover:opacity-100 bg-${swipeConfig.color}-100 text-${swipeConfig.color}-700`
            }`,
            'aria-label': `${userConfig.label} action`
          }, React.createElement('div', {
            className: `flex ${isVertical ? 'flex-col' : 'flex-row'} items-center px-3 py-2 rounded-full hover:shadow-md`
          }, 
            direction === SWIPE_ACTIONS.RIGHT && React.createElement('span', {
              className: `text-xs font-bold whitespace-nowrap ${isTriggered ? 'text-sm' : ''}`
            }, userConfig.label),
            React.createElement(Icon, { size: isTriggered ? 24 : 20 }),
            direction !== SWIPE_ACTIONS.RIGHT && React.createElement('span', {
              className: `text-xs font-bold whitespace-nowrap ${isTriggered ? 'text-sm' : ''}`
            }, userConfig.label)
          ));
        });

        const ProfileCard = React.memo(({ 
          profile, 
          config,
          triggeredDirection, 
          onSwipe,
          onTouchStart,
          onTouchEnd
        }) => {
          const [logoError, setLogoError] = useState(false);
          const companyLogoUrl = getCompanyLogoUrl(profile.company);
          
          const handleButtonClick = useCallback((direction) => {
            onSwipe(direction);
          }, [onSwipe]);

          const handleLinkClick = useCallback((e) => {
            e.preventDefault();
            e.stopPropagation();
            try {
              window.open(profile.linkedinUrl, '_blank', 'noopener,noreferrer');
            } catch (error) {
              window.location.href = profile.linkedinUrl;
            }
          }, [profile.linkedinUrl]);

          // Split name into first and last if it's a full name
          const nameParts = profile.name.split(' ');
          const firstName = nameParts[0] || '';
          const lastName = nameParts.slice(1).join(' ') || '';

          return React.createElement('div', {
            className: "bg-white rounded-3xl shadow-2xl w-full mx-4 select-none relative z-10",
            style: {
              width: 'min(380px, calc(100vw - 2rem))',
              height: 'min(500px, calc(100vh - 8rem))',
              maxWidth: '380px'
            },
            onTouchStart,
            onTouchEnd
          }, 
            ...Object.values(SWIPE_ACTIONS).map(direction => 
              React.createElement(SwipeButton, {
                key: direction,
                direction,
                config,
                isTriggered: triggeredDirection === direction,
                onClick: handleButtonClick
              })
            ),
            React.createElement('div', { className: "p-6 text-center relative flex flex-col h-full justify-center" },
              // Avatar/Logo Section
              React.createElement('div', { className: "mb-4" },
                profile.company && companyLogoUrl && !logoError ? 
                  React.createElement('img', {
                    src: companyLogoUrl,
                    alt: `${profile.company} logo`,
                    className: "w-24 h-24 mx-auto rounded-2xl company-logo object-contain",
                    onError: () => setLogoError(true)
                  }) :
                  React.createElement('div', {
                    className: `w-24 h-24 mx-auto rounded-full shadow-lg ${profile.color} flex items-center justify-center`
                  }, React.createElement('span', {
                    className: "text-4xl"
                  }, profile.emoji))
              ),
              
              // First Name Section (Linked)
              React.createElement('div', { className: "mb-1" },
                profile.linkedinUrl ? 
                  React.createElement('button', {
                    onClick: handleLinkClick,
                    className: "text-2xl font-bold text-blue-600 hover:text-blue-800 hover:underline cursor-pointer transition-colors z-50 relative leading-tight"
                  }, firstName) :
                  React.createElement('h3', {
                    className: "text-2xl font-bold text-gray-800 leading-tight"
                  }, firstName)
              ),
              
              // Last Name Section
              lastName && React.createElement('div', { className: "mb-3" },
                React.createElement('p', {
                  className: "text-xl font-semibold text-gray-700"
                }, lastName)
              ),
              
              // Title Section
              profile.title && React.createElement('div', { className: "mb-2" },
                React.createElement('p', {
                  className: "text-base font-medium text-gray-600"
                }, profile.title)
              ),
              
              // Company Section
              profile.company && React.createElement('div', { className: "mb-2" },
                React.createElement('p', {
                  className: "text-base text-gray-500 font-medium"
                }, profile.company)
              )
            )
          );
        });

        const ConfigurationScreen = React.memo(({ onStart }) => {
          const [swipeConfig, setSwipeConfig] = useState(() => {
            return Object.keys(SWIPE_ACTIONS).reduce((config, key) => {
              const direction = SWIPE_ACTIONS[key];
              config[direction] = { ...SWIPE_CONFIG[direction] };
              return config;
            }, {});
          });
          
          const [crmData, setCrmData] = useState('');
          const [profiles, setProfiles] = useState(SAMPLE_PROFILES);
          const [dataSource, setDataSource] = useState('sample');
          const [isDragging, setIsDragging] = useState(false);
          
          const handleConfigChange = useCallback((direction, value) => {
            setSwipeConfig(prev => ({
              ...prev,
              [direction]: { ...prev[direction], label: value }
            }));
          }, []);

          const processFile = useCallback((file) => {
            if (!file || !file.name.toLowerCase().endsWith('.csv')) {
              alert('Please upload a CSV file');
              return;
            }

            const reader = new FileReader();
            reader.onload = (e) => {
              const text = e.target.result;
              setCrmData(text);
              try {
                const parsedProfiles = parseCsvData(text);
                if (parsedProfiles.length > 0) {
                  setProfiles(parsedProfiles);
                  setDataSource('csv');
                } else {
                  alert('No valid profiles found in CSV. Please check your data format.');
                }
              } catch (error) {
                console.error('Error parsing CSV:', error);
                alert('Error reading CSV file. Please check the format.');
              }
            };
            reader.readAsText(file);
          }, []);
          
          const handleCRMUpload = useCallback((event) => {
            const text = event.target.value;
            setCrmData(text);
            
            if (text.trim()) {
              try {
                const parsedProfiles = parseCsvData(text);
                setProfiles(parsedProfiles);
                setDataSource('csv');
              } catch (error) {
                console.error('Error parsing CRM data:', error);
              }
            }
          }, []);

          const handleFileSelect = useCallback((event) => {
            const file = event.target.files[0];
            if (file) {
              processFile(file);
            }
          }, [processFile]);

          const handleDragOver = useCallback((e) => {
            e.preventDefault();
            setIsDragging(true);
          }, []);

          const handleDragLeave = useCallback((e) => {
            e.preventDefault();
            setIsDragging(false);
          }, []);

          const handleDrop = useCallback((e) => {
            e.preventDefault();
            setIsDragging(false);
            const file = e.dataTransfer.files[0];
            if (file) {
              processFile(file);
            }
          }, [processFile]);
          
          const handleDataSourceChange = useCallback((source) => {
            setDataSource(source);
            if (source === 'sample') {
              setProfiles(SAMPLE_PROFILES);
              setCrmData('');
            }
          }, []);
          
          const handleStart = useCallback(() => {
            onStart(swipeConfig, profiles);
          }, [onStart, swipeConfig, profiles]);

          return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4" },
            React.createElement('div', { className: "max-w-4xl mx-auto" },
              React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-8" },
                React.createElement('div', { className: "flex items-center gap-3 mb-8" },
                  React.createElement(Settings, { className: "w-8 h-8 text-blue-600" }),
                  React.createElement('h1', { className: "text-3xl font-bold text-gray-800" }, "Contact Updater Setup")
                ),
                React.createElement('div', { className: "mb-8" },
                  React.createElement('h2', { className: "text-xl font-semibold text-gray-800 mb-4" }, "Configure Swipe Directions"),
                  React.createElement('div', { className: "grid grid-cols-1 md:grid-cols-2 gap-4" },
                    Object.entries(SWIPE_ACTIONS).map(([key, direction]) =>
                      React.createElement('div', { key: direction, className: "border rounded-lg p-4" },
                        React.createElement('h3', { className: "font-medium text-gray-700 mb-3 capitalize flex items-center gap-2" },
                          React.createElement('span', { className: `w-4 h-4 rounded-full ${SWIPE_CONFIG[direction].bgClass}` }),
                          `${direction} Direction ${SWIPE_CONFIG[direction].label === 'SUPER WARM' ? '⬆️' : 
                                               SWIPE_CONFIG[direction].label === 'UNKNOWN' ? '⬇️' :
                                               SWIPE_CONFIG[direction].label === "DON'T INCLUDE" ? '⬅️' : '➡️'}`
                        ),
                        React.createElement('div', {},
                          React.createElement('label', { className: "block text-sm font-medium text-gray-600 mb-1" }, "Label"),
                          React.createElement('input', {
                            type: "text",
                            value: swipeConfig[direction]?.label || '',
                            onChange: (e) => handleConfigChange(direction, e.target.value),
                            className: "w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",
                            placeholder: "Enter action label"
                          })
                        )
                      )
                    )
                  )
                ),
                React.createElement('div', { className: "mb-8" },
                  React.createElement('h2', { className: "text-xl font-semibold text-gray-800 mb-4 flex items-center gap-2" },
                    React.createElement(Upload, { className: "w-5 h-5" }),
                    "CRM Data"
                  ),
                  React.createElement('div', { className: "mb-4" },
                    React.createElement('div', { className: "flex gap-4 mb-4" },
                      React.createElement('label', { className: "flex items-center" },
                        React.createElement('input', {
                          type: "radio",
                          checked: dataSource === 'sample',
                          onChange: () => handleDataSourceChange('sample'),
                          className: "mr-2"
                        }),
                        "Use Sample Data"
                      ),
                      React.createElement('label', { className: "flex items-center" },
                        React.createElement('input', {
                          type: "radio",
                          checked: dataSource === 'csv',
                          onChange: () => handleDataSourceChange('csv'),
                          className: "mr-2"
                        }),
                        "Upload Your Data"
                      )
                    )
                  ),
                  dataSource === 'csv' && React.createElement('div', {},
                    React.createElement('div', { className: "mb-4" },
                      React.createElement('h3', { className: "text-lg font-medium text-gray-700 mb-3" }, "Choose Upload Method:"),
                      
                      // Drag & Drop Area
                      React.createElement('div', {
                        className: `border-2 border-dashed rounded-lg p-8 text-center transition-colors ${
                          isDragging ? 'border-blue-500 bg-blue-50' : 'border-gray-300 hover:border-gray-400'
                        }`,
                        onDragOver: handleDragOver,
                        onDragLeave: handleDragLeave,
                        onDrop: handleDrop
                      },
                        React.createElement('div', { className: "space-y-3" },
                          React.createElement(Upload, { className: "w-12 h-12 text-gray-400 mx-auto" }),
                          React.createElement('div', {},
                            React.createElement('p', { className: "text-lg font-medium text-gray-900" }, "Drag & Drop CSV File"),
                            React.createElement('p', { className: "text-sm text-gray-500" }, "Or click to browse files")
                          ),
                          React.createElement('input', {
                            type: "file",
                            accept: ".csv",
                            onChange: handleFileSelect,
                            className: "hidden",
                            id: "csv-file-input"
                          }),
                          React.createElement('label', {
                            htmlFor: "csv-file-input",
                            className: "inline-block bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 cursor-pointer transition-colors"
                          }, "Choose CSV File")
                        )
                      ),
                      
                      React.createElement('div', { className: "text-center my-4" },
                        React.createElement('span', { className: "text-gray-500 bg-white px-3" }, "OR")
                      )
                    ),
                    
                    // Text Area Method
                    React.createElement('div', {},
                      React.createElement('label', { className: "block text-sm font-medium text-gray-600 mb-2" },
                        "Copy & Paste CSV Data"
                      ),
                      React.createElement('p', { className: "text-sm text-gray-500 mb-3" },
                        "✅ Required: First Name, Last Name, LinkedIn Profile",
                        React.createElement('br', {}),
                        "✅ Optional: Title, Company (for logos), Full Name",
                        React.createElement('br', {}),
                        "💡 Company logos appear automatically if Company column included",
                        React.createElement('br', {}),
                        "🔗 LinkedIn URLs can't auto-extract company info"
                      ),
                      React.createElement('textarea', {
                        value: crmData,
                        onChange: handleCRMUpload,
                        className: "w-full h-40 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 font-mono text-sm",
                        placeholder: "First Name,Last Name,LinkedIn Profile\nJohn,Smith,linkedin.com/in/johnsmith\nJane,Doe,linkedin.com/in/janedoe"
                      })
                    ),
                    
                    // Preview
                    profiles.length > 0 && dataSource === 'csv' && React.createElement('div', { className: "mt-4 p-4 bg-green-50 rounded-lg border border-green-200" },
                      React.createElement('h3', { className: "font-medium text-green-800 mb-2 flex items-center gap-2" },
                        "✅ Data Loaded Successfully!",
                        React.createElement('span', { className: "text-sm font-normal" }, `(${profiles.length} profiles)`)
                      ),
                      React.createElement('div', { className: "space-y-1 max-h-32 overflow-y-auto" },
                        profiles.slice(0, 3).map(profile =>
                          React.createElement('div', { key: profile.id, className: "text-sm flex items-center gap-2" },
                            React.createElement('span', { className: "text-lg" }, profile.emoji),
                            React.createElement('span', { className: "font-medium" }, profile.name),
                            profile.title && React.createElement('span', { className: "text-gray-600" }, `- ${profile.title}`),
                            profile.linkedinUrl && React.createElement('span', { className: "text-green-600" }, "🔗")
                          )
                        ),
                        profiles.length > 3 && React.createElement('div', { className: "text-sm text-gray-600" }, `... and ${profiles.length - 3} more`)
                      )
                    )
                  ),
                  dataSource === 'sample' && React.createElement('div', { className: "p-4 bg-gray-50 rounded-lg" },
                    React.createElement('p', { className: "text-sm text-gray-600 mb-2" }, `Using sample data with ${SAMPLE_PROFILES.length} profiles`),
                    React.createElement('div', { className: "flex gap-2" },
                      SAMPLE_PROFILES.slice(0, 5).map(profile =>
                        React.createElement('span', { key: profile.id, className: "text-lg" }, profile.emoji)
                      )
                    )
                  )
                ),
                React.createElement('div', { className: "flex justify-center" },
                  React.createElement('button', {
                    onClick: handleStart,
                    disabled: profiles.length === 0,
                    className: "flex items-center gap-2 bg-blue-600 text-white px-8 py-3 rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors font-medium"
                  },
                    React.createElement(Play, { className: "w-5 h-5" }),
                    `Start Swiping (${profiles.length} profiles)`
                  )
                )
              )
            )
          );
        });

        const LinkedInSwipeApp = () => {
          const [appState, setAppState] = useState('config');
          const [swipeConfig, setSwipeConfig] = useState({});
          const [currentIndex, setCurrentIndex] = useState(0);
          const [profiles, setProfiles] = useState([]);
          const [decisions, setDecisions] = useState([]);
          const [triggeredDirection, setTriggeredDirection] = useState(null);
          
          const currentProfile = profiles[currentIndex];
          
          const handleStart = useCallback((config, profileData) => {
            setSwipeConfig(config);
            setProfiles([...profileData]);
            setCurrentIndex(0);
            setDecisions([]);
            setTriggeredDirection(null);
            setAppState('swiping');
          }, []);

          const handleSwipe = useCallback((direction) => {
            if (!currentProfile) return;

            const decision = createDecision(currentProfile, direction);
            setDecisions(prev => [...prev, decision]);
            setTriggeredDirection(direction);

            setTimeout(() => {
              const nextIndex = currentIndex + 1;
              if (nextIndex >= profiles.length) {
                setAppState('complete');
                return;
              }
              setCurrentIndex(nextIndex);
              setTriggeredDirection(null);
            }, BUTTON_HIGHLIGHT_DURATION);
          }, [currentProfile, currentIndex, profiles.length]);

          const { handleTouchStart, handleTouchEnd } = useSwipeGesture(handleSwipe);

          if (appState === 'config') {
            return React.createElement(ConfigurationScreen, { onStart: handleStart });
          }
          
          if (appState === 'complete') {
            return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4" },
              React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-8 text-center max-w-md" },
                React.createElement('h2', { className: "text-2xl font-bold text-gray-800 mb-4" }, "All Done!"),
                React.createElement('p', { className: "text-gray-600 mb-6" }, "You've reviewed all profiles in your stack."),
                React.createElement('p', { className: "text-sm text-gray-500 mb-6" }, `Decisions made: ${decisions.length}`),
                React.createElement('div', { className: "space-y-3" },
                  React.createElement('button', {
                    onClick: () => setAppState('results'),
                    className: "w-full bg-blue-500 text-white px-6 py-2 rounded-lg hover:bg-blue-600 transition-colors"
                  }, "View Results Summary"),
                  React.createElement('button', {
                    onClick: () => setAppState('config'),
                    className: "w-full bg-gray-500 text-white px-6 py-2 rounded-lg hover:bg-gray-600 transition-colors"
                  }, "Start Over")
                )
              )
            );
          }

          if (appState === 'results') {
            const sortedDecisions = [...decisions].sort((a, b) => a.name.localeCompare(b.name));
            const groupedResults = {};
            Object.values(SWIPE_ACTIONS).forEach(action => {
              groupedResults[action] = decisions.filter(d => d.direction === action);
            });

            const exportData = () => {
              const header = 'Name,Action,Timestamp\n';
              const rows = sortedDecisions.map(decision => {
                const name = decision.name.replace(/"/g, '""');
                const action = (swipeConfig[decision.direction]?.label || decision.direction).replace(/"/g, '""');
                const timestamp = new Date(decision.timestamp).toLocaleString();
                return `"${name}","${action}","${timestamp}"`;
              }).join('\n');
              
              const csvContent = '\uFEFF' + header + rows;
              
              const element = document.createElement('a');
              const file = new Blob([csvContent], { 
                type: 'text/csv;charset=utf-8;' 
              });
              element.href = URL.createObjectURL(file);
              element.download = `contact-updater-results-${new Date().toISOString().split('T')[0]}.csv`;
              element.style.display = 'none';
              document.body.appendChild(element);
              element.click();
              document.body.removeChild(element);
              URL.revokeObjectURL(element.href);
            };

            return React.createElement('div', { className: "min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 p-4" },
              React.createElement('div', { className: "max-w-6xl mx-auto" },
                React.createElement('div', { className: "bg-white rounded-2xl shadow-xl p-8" },
                  React.createElement('div', { className: "flex items-center justify-between mb-8" },
                    React.createElement('h1', { className: "text-3xl font-bold text-gray-800" }, "Swipe Results Summary"),
                    React.createElement('div', { className: "flex gap-3" },
                      React.createElement('button', {
                        onClick: exportData,
                        className: "flex items-center gap-2 bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors"
                      },
                        React.createElement(Upload, { className: "w-4 h-4" }),
                        "Export CSV"
                      ),
                      React.createElement('button', {
                        onClick: () => setAppState('complete'),
                        className: "bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors"
                      }, "Back")
                    )
                  ),
                  React.createElement('div', { className: "grid grid-cols-2 md:grid-cols-4 gap-4 mb-8" },
                    Object.entries(SWIPE_ACTIONS).map(([key, action]) => {
                      const count = groupedResults[action]?.length || 0;
                      const percentage = decisions.length > 0 ? Math.round((count / decisions.length) * 100) : 0;
                      const actionConfig = SWIPE_CONFIG[action];
                      
                      return React.createElement('div', { key: action, className: "bg-gray-50 rounded-lg p-4 text-center" },
                        React.createElement('div', { className: `w-8 h-8 rounded-full ${actionConfig.bgClass} mx-auto mb-2` }),
                        React.createElement('h3', { className: "font-semibold text-gray-800" }, swipeConfig[action]?.label || actionConfig.label),
                        React.createElement('p', { className: "text-2xl font-bold text-gray-900" }, count),
                        React.createElement('p', { className: "text-sm text-gray-500" }, `${percentage}%`)
                      );
                    })
                  ),
                  React.createElement('div', { className: "bg-white border rounded-lg overflow-hidden" },
                    React.createElement('div', { className: "overflow-x-auto" },
                      React.createElement('table', { className: "w-full" },
                        React.createElement('thead', { className: "bg-gray-50" },
                          React.createElement('tr', {},
                            React.createElement('th', { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" }, "Name"),
                            React.createElement('th', { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" }, "Action Taken"),
                            React.createElement('th', { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" }, "Direction"),
                            React.createElement('th', { className: "px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider" }, "Timestamp")
                          )
                        ),
                        React.createElement('tbody', { className: "bg-white divide-y divide-gray-200" },
                          sortedDecisions.map((decision, index) => {
                            const actionConfig = SWIPE_CONFIG[decision.direction];
                            const userLabel = swipeConfig[decision.direction]?.label || actionConfig.label;
                            
                            return React.createElement('tr', { key: `${decision.profileId}-${index}`, className: "hover:bg-gray-50" },
                              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap" },
                                React.createElement('div', { className: "text-sm font-medium text-gray-900" }, decision.name)
                              ),
                              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap" },
                                React.createElement('div', { className: "flex items-center gap-2" },
                                  React.createElement('span', { className: `w-3 h-3 rounded-full ${actionConfig.bgClass}` }),
                                  React.createElement('span', { className: "text-sm text-gray-900" }, userLabel)
                                )
                              ),
                              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap" },
                                React.createElement('span', { className: "text-sm text-gray-500 capitalize" },
                                  decision.direction === 'up' ? '⬆️ Up' :
                                  decision.direction === 'down' ? '⬇️ Down' :
                                  decision.direction === 'left' ? '⬅️ Left' : '➡️ Right'
                                )
                              ),
                              React.createElement('td', { className: "px-6 py-4 whitespace-nowrap text-sm text-gray-500" },
                                new Date(decision.timestamp).toLocaleString()
                              )
                            );
                          })
                        )
                      )
                    )
                  ),
                  decisions.length === 0 && React.createElement('div', { className: "text-center py-8" },
                    React.createElement('p', { className: "text-gray-500" }, "No decisions recorded yet.")
                  )
                )
              )
            );
          }

          return React.createElement('div', {
            className: "swipe-locked min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex flex-col",
            style: { 
              userSelect: 'none',
              WebkitUserSelect: 'none',
              WebkitTouchCallout: 'none'
            }
          },
            React.createElement('header', { className: "bg-white shadow-sm p-3 relative z-20" },
              React.createElement('div', { className: "flex justify-between items-center max-w-sm mx-auto" },
                React.createElement('h1', { className: "text-lg font-bold text-gray-800" }, "Contact Updater"),
                React.createElement('div', { className: "text-sm text-gray-500" },
                  `${currentIndex + 1} of ${profiles.length}`
                )
              )
            ),
            React.createElement('main', {
              className: "flex-1 flex items-center justify-center p-4 relative",
              style: { 
                touchAction: 'none',
                contain: 'layout style paint'
              }
            },
              React.createElement(ProfileCard, {
                profile: currentProfile,
                config: swipeConfig,
                triggeredDirection,
                onSwipe: handleSwipe,
                onTouchStart: handleTouchStart,
                onTouchEnd: handleTouchEnd
              })
            ),
            React.createElement('footer', { className: "bg-white border-t p-3 relative z-20" },
              React.createElement('div', { className: "max-w-sm mx-auto text-center text-sm text-gray-500" },
                `Reviewed: ${decisions.length} | Remaining: ${profiles.length - currentIndex}`
              )
            )
          );
        };

        // Render the app
        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(React.createElement(LinkedInSwipeApp));
    </script>
</body>
</html>
